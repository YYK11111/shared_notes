# 后端API文档

## 概述
本文档包含系统后端所有API接口的详细说明，按照功能模块进行分类，方便开发人员查阅和使用。

## 文档结构

```
api-docs/
├── README.md                    # 文档概览和索引
├── 认证与授权API文档.md           # 认证相关接口
├── 笔记管理API文档.md             # 笔记管理接口
├── 用户管理API文档.md             # 前台用户相关接口
├── 管理员管理API文档.md           # 管理员和角色管理接口
├── 系统配置API文档.md             # 系统配置相关接口
├── 反馈管理API文档.md             # 用户反馈管理接口
├── 分类管理API文档.md             # 分类管理接口
├── 搜索管理API文档.md             # 搜索功能管理接口
└── 路由权限管理API文档.md         # 路由权限相关接口
```

## 功能模块说明

### 1. 认证与授权
包含用户登录、注册、登出、修改密码、刷新令牌等认证相关接口。

### 2. 笔记管理
包含笔记的创建、查询、更新、删除、批量操作、统计等完整的笔记管理功能。

### 3. 用户管理
包含面向前台用户的接口，如获取首页数据、分类列表、笔记详情、搜索功能等。

### 4. 管理员管理
包含后台管理员用户管理、角色管理、权限分配、登录日志和操作日志等功能。

### 5. 系统配置
包含系统配置的管理、数据库备份恢复、缓存清理、系统信息查询等系统级操作。

### 6. 反馈管理
包含用户反馈的提交、查询、处理、回复等功能接口。

### 7. 分类管理
包含笔记分类的创建、查询、更新、删除、统计等操作，支持树形结构管理。

### 8. 搜索管理
包含搜索索引管理、搜索屏蔽列表、搜索日志查询、热门搜索词等功能。

### 9. 路由权限管理
包含路由权限相关的接口，用于前端动态构建路由表和权限控制。

## 接口规范

### 1. 请求格式
- 所有接口均使用HTTP协议
- 数据传输主要使用JSON格式
- 文件上传使用multipart/form-data格式
- GET请求参数通过URL查询字符串传递
- POST/PUT请求参数通过请求体传递

### 2. 响应格式
所有接口返回统一的JSON格式：
```json
{
  "code": 200,          // 状态码，200表示成功
  "message": "成功",     // 提示信息
  "data": { ... }       // 返回的数据
}
```

### 3. 状态码说明
- 200: 成功
- 400: 请求参数错误
- 401: 未授权（需要登录）
- 403: 权限不足
- 404: 资源不存在
- 500: 服务器内部错误

## 认证说明

### 1. JWT认证
- 登录成功后，服务器返回JWT令牌和刷新令牌
- 后续请求需要在Authorization头中携带JWT令牌：`Bearer {token}`
- JWT令牌有效期为1小时
- 刷新令牌有效期为7天

### 2. 权限控制
- 系统采用RBAC（基于角色的访问控制）模型
- 不同角色拥有不同的操作权限
- 超级管理员拥有最高权限

## 数据安全

### 1. 密码安全
- 用户密码使用bcrypt算法进行加密存储
- 密码长度要求8-20位，包含字母、数字和特殊字符

### 2. 输入验证
- 所有用户输入均进行严格的验证和过滤
- 使用XSS过滤防止跨站脚本攻击
- 防SQL注入处理

### 3. 操作日志
- 关键操作均记录详细的操作日志
- 日志包含操作人、操作时间、操作内容、IP地址等信息

## 使用建议

1. 在调用接口前，请确保已了解接口的参数要求和返回格式
2. 对于分页接口，建议合理设置pageSize，避免一次性请求过多数据
3. 敏感操作（如删除、修改重要数据）前，建议先进行确认
4. 定期调用数据库备份接口，确保数据安全
5. 如遇问题，请查看接口返回的错误信息，或联系系统管理员

## 文档更新记录

- 2025-09-05: 初始创建所有API文档

## 联系方式

如有疑问或需要帮助，请联系系统管理员。